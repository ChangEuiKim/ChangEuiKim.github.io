---
title: '[Web] IP주소와 DNS'
layout: single
tags:
  - ASAC 5기
  - Frontend
  - Backend
  - Web Development
  - Network
  - LAN
  - WAN
  - Encapsulation
  - Decapsulation
  - IP
  - Domain Name Server
  - DNS Resolver
categories:
  - Web Development
date: 2024-04-23 17:00:00 +0900
last_modified_at: 2024-04-23 17:00:00 +0900
---

# ASAC 5기 웹 개발 기본 이론 - 네트워크 : IP주소와 DNS

### 💡네트워크는 무엇인가?

CERN에서 논문 등의 문서를 주고받기 위하여 웹이 개발되었습니다. 이때 문서를 주고받는 각각의 컴퓨터는 웹 서버의 역할을 합니다. 그리고 이 서버 사이에 구성된 망을 네트워크 `Network`라고 합니다.

네트워크에서 서버끼리 데이터를 주고 받기 위해서는 통신에 대한 규칙을 미리 약속해야합니다. 이러한 통신규약을 프로토콜 `Protocol`이라고 합니다. 프로토콜에는 TCP, UDP, IP, Ethernet 등이 있습니다.

Ethernet을 사용하여 구성한 네트워크를 근거리 통신망 Local Area Network `LAN`이라고 합니다. 스위치, PC 랜카드와 UTP 케이블 등을 사용해 망을 구성할 수 있습니다.

Gateway를 통해 LAN과 LAN이 연결된 것을 원거리 통신망 Wide Area Network `WAN`이라고 합니다. 주로 ISP 업체가 구성한 망을 임대하여 사용합니다.

<br>

#### 💡인트라넷과 인터넷의 차이는?

인트라넷 Intranet은 내부의 네트워크, 즉 사내망 등을 말합니다. 인트라넷은 주로 LAN을 활용하여 구축하며 VLAN 등을 구성할 수도 있습니다.

인터넷 Internet은 전세계적으로 연결된 네트워크를 말합니다. TCP/IP 프로토콜을 사용하여 전세계가 WAN으로 연결되어있습니다.

<br>

### 💡IP 주소는 네트워크에서 무슨 역할을 하는가?

1 캡슐화와 역캡슐화

네트워크에서 각 서버간 데이터를 주고받을때 여러 계층을 거치면서 진행됩니다.

- 데이터를 전송할때는 애플리케이션 계층에서 물리적 계층으로 내려가면서 페이로드와 계층 프로토콜의 헤더를 결합하는 캡슐화 `Encapsulation`과정을 거칩니다.
- 데이터를 수신할때는 물리적 계층에서 애플리케이션 계층으로 올라오면서 각 계층의 프로토콜의 헤더와 페이로드를 분리하는 역캡슐화 `Decapsulation`과정을 거칩니다.

2 LAN 환경과 Ethernet 헤더

- LAN 환경에서는 주로 Ethernet 프로토콜을 사용합니다.
- 페이로드에 소스 `Source` 및 목적지 `Destination`의 MAC 주소를 포함한 헤더를 결합하여 전송합니다.
- LAN 환경에서는 MAC 주소만으로 각 서버를 식별할 수 있기에 페이로드는 Ethernet 헤더만으로 충분합니다.

3 WAN 환경과 IP 헤더

- WAN 환경은 LAN 환경보다 넓은 지역의 다양한 네트워크와의 연결로 구성되어 있기에 TCP/IP 프로토콜도 사용합니다.
- 애플리케이션 계층
  - HTTP, FTP 등의 헤더를 추가해 캡슐화합니다.
  - 데이터를 생성해서 헤더와 함께 전송 계층으로 전달합니다.
- 전송 계층
  - TCP, UDP 헤더를 추가해 캡슐화합니다.
  - 헤더의 정보에 소스 Port와 목적지 Port, 플래그 등이 추가되어 네트워크 계층으로 전달합니다.
- 네트워크 계층
  - IP 헤더를 추가해 캡슐화합니다.
  - 헤더의 정보에 소스 IP 주소와 목적지 IP 주소 등이 추가되어 데이터 링크 계층으로 전달합니다.
- 데이터 링크 계층
  - Ethernet 헤더를 추가해 캡슐화합니다.
  - 헤더의 정보에 소스 MAC 주소와 목적지 MAC 주소 등이 추가되어 물리적 계층으로 전달합니다.
- 물리적 계층
  - 페이로드를 전기적 신호로 변화하여 케이블 등을 통해 전송합니다.

캡슐화는 각 통신장치를 거치면서 진행됩니다. 따라서 각 통신장치에서 헤더를 확인하고 자신이 목적지일 경우 페이로드의 역캡슐화를 진행합니다. LAN 밖의 환경에서 서버 주소를 특정하기 위하여 IP 주소가 필요합니다.

<br>

### 💡IP 주소는 어떻게 구성되는가?

IP4 주소는 32bit 크기를 가질 수 있으며 총 $2^{32}$개의 주소를 표현할 수 있습니다.

IP 주소는 A, B, C, D, E의 다섯가지 클래스로 구분합니다.

- A
  - 가장 앞 비트가 0입니다.
  - 0.0.0.0 ~ 127.255.255.255의 주소를 가질 수 있습니다.
- B
  - 가장 앞 비트가 10입니다.
  - 128.0.0.0 ~ 191.255.255.255의 주소를 가질 수 있습니다.
- C
  - 가장 앞 비트가 110입니다.
  - 192.0.0.0 ~ 223.255.255.255의 주소를 가질 수 있습니다.
- D
  - 가장 앞 비트가 1110입니다.
  - 224.0.0.0 ~ 239.255.255.255의 주소를 가질 수 있습니다.
- E
  - 예비용으로 예약된 나머지 주소입니다.
  - 240.0.0.0 ~ 255.255.255.255의 주소를 가질 수 있습니다.

<br>

#### 💡서브넷팅

| 서브넷 마스크 | 네트워크 아이디 | 호스트 주소 범위 | IP 주소 개수 |
| --: | --: | --: | --: |
| 255.255.255.255 | 192.168.30.4 | 192.168.30.4 | 1개 |
| 255.255.255.0 | 192.168.30.0 | 192.168.30.1 ~ 192.168.30.254 | $2^{8} - 2$개 |
| 255.255.0.0 | 192.168.0.0 | 192.168.0.1 ~ 192.168.255.254 | $2^{16} - 2$개 |
| 255.0.0.0 | 192.0.0.0 | 192.0.0.1 ~ 192.255.255.254 | $2^{24} - 2$개 |
| 0.0.0.0 | 0.0.0.0 | 0.0.0.1 ~ 255.255.255.254 | $2^{32} - 2$개 |

네트워크를 구분하기 위해 서브넷 마스크 `Subnet Mask`를 사용합니다.

- 맨 앞 비트부터 1이 연속되는 부분이 네트워크 식별자입니다.
- 뒤의 0이 연속되는 부분을 호스트 식별자로 사용가능합니다.
- 서브넷 마스크 `255.255.255.255`는 특정 호스트를 지정할 때 사용합니다.
- 서브넷 마스크 `0.0.0.0`은 모든 네트워크를 대상으로 할 때 사용합니다.

<br>

#### 💡공인 IP와 사설 IP

전세계 IP 주소는 Internet Assigned Numbers Authority `IANA`에서 관리하고 있습니다. 그리고 각 대륙별 관리기관인 Regional Internet Registry `RIR`에 주소를 분배합니다.

우리나라의 경우 아시아 태평양 관리기관인 APNIC에서 IP 주소를 분배받아 국내 인터넷접속 서비스 제공자 Internet Service Provider `ISP`등에 할당하고 있습니다. 즉, 어느 네트워크에서도 서버의 주소를 구분할 수 있는 것이 공인 IP입니다.

반대로 사설 IP는 ISP 등과 관계없이 내부 내트워크에서 서버 식별을 위해 사용하는 IP 주소입니다.

- A Class : 10.0.0.0 ~ 10.255.255.255
- B Class : 172.16.0.0 ~ 172.31.255.255
- C Class : 192.168.0.0 ~ 192.168.255.255

<br>

### 💡도메인명은 어떻게 IP주소로 매핑되는가?

IP주소는 숫자의 나열이기 때문에 사람이 쉽게 기억할 수 없습니다. 그래서 별칭 Alias를 붙여서 사람이 식별하기 쉽도록 하고, 이를 실제 IP 주소와 연결하는 Domain Name System `DNS`를 개발하였습니다.

로컬환경에서도 도메인명과 IP주소를 매핑할 수 있습니다. 일반적으로는 Internet Corporation for Assigned Names and Numbers `ICANN`에서 관리하는 DNS를 사용합니다.

웹 브라우저가 DNS를 조회하는 순서는 다음과 같습니다.

- 웹 브라우저에 캐시된 DNS를 조회합니다.
- 찾을 수 없다면 로컬 환경에 설정된 DNS를 조회합니다.
- 찾을 수 없다면 ISP 업체에서 제공하는 캐시된 DNS를 조회합니다.
- 찾을 수 없다면 DNS Resolver를 사용하여 재귀적으로 도메인명과 IP주소의 매핑을 탐색합니다.

#### 💡Domain Resolver의 작동원리

`finance.naver.com`의 도메인명에 대한 IP주소를 찾을 경우

- Root Server
  - Root와 TLD Server 주소 사이의 매핑이 되어있습니다.
  - URL의 끝 부분을 `.`으로 인식하여 `.com`까지 파싱하고 이에 해당하는 TLD Server로 연결합니다.
- Top-Level Domain `TLD` Server
  - TLD와 Name Server 주소 사이의 매핑이 되어있습니다.
  - URL의 끝부분부터 `naver.com`까지 파싱하고 이에 해당하는 Name Server로 연결합니다.
- Name Server
  - 도메인명과 IP 주소 사이의 매핑이 되어있습니다.
  - `finance.naver.com`이 캐싱되어있다면 해당 IP 주소를 반환합니다.
  - 캐싱되어있지 않다면 NS 내에 저장된 IP 주소를 찾아 반환합니다.

이러한 재귀적인 방법을 통해 도메인명과 IP주소를 매핑하기 때문에 Domain Resolver를 Domain Recursor라고도 합니다.
