---
title: '[Java] 자바 가상 머신'
layout: single
tags:
  - ASAC 5기
  - Backend
  - Java
  - Syntax
categories:
  - Java
date: 2024-04-02 22:48:00 +0900
last_modified_at: 2024-04-02 22:48:00 +0900
---

# 자바 가상 머신 Java Virtual Machine (JVM)

범용적인 환경에서의 소프트웨어 실행을 위해 자바는 자바 가상 머신을 통해 자바 프로그래밍 언어를 컴파일하고 이를 다양한 기기에서 작동하게 합니다.

멀티 스레드를 지원하는 JVM은 구동 시 다양한 런타임 데이터 영역을 정의하고 스레드별로 데이터 영역을 생성하고 실행합니다.

## 스택 Stacks

메서드 Method가 호출되면 새로운 프레임 Frame이 생성되어 스레드의 스택에 쌓이고, 반환 시 프레임도 스택에서 팝됩니다. 각 프레임은 지역 변수의 배열, 피연산자 스택, 메서드 클래스의 런타임 상수 풀에 대한 참조를 지니고 있습니다.

따라서 한 스레드에서 생성된 프레임은 다른 스레드를 참조하거나 참조될 수 없습니다. 또한 스레드에서는 현재 실행중인 프레임이 활성화되어있는 동안 다른 프레임은 비활성 상태입니다. 이는 자바스크립트의 콜 스택에서 실행 컨텍스트의 생성과 소멸의 생명주기와 비슷한 흐름으로 생각할 수 있습니다.

스레드는 스택의 크기에 대한 제어를 제공하는데, 계산된 이상의 스택이 필요할 때 `StackOverflowError`가 발생합니다.

## 힙

힙 메모리는 모든 클래스의 인스턴스와 배열에 대한 공간을 할당합니다. 즉, 참조형 타입의 값은 힙에 할당되며, 모든 스레드 사이에 해당 공간을 공유하고 있습니다.

스레드는 힙의 크기를 자동으로 관리하는데, 계산된 이상의 힙이 필요할 때 `OutOfMemoryError`가 발생합니다.

## 메서드 영역

메서드 영역은 런타임 상수 풀, 필드 데이터, 메서드 데이터, 클래스별 구조 등에 대한 공간을 할당합니다. 또한 힙 처럼 모든 스레드 사이에 해당 공간을 공유하고 있습니다.

스레드는 메서드 영역의 크기에 대한 제어를 제공하는데, 메모리에 할당할 공간이 충분하지 않을 경우 `OutOfMemoryError`가 발생합니다.
